import{r as u}from"./index-TjLUG_Bo.js";import{l as X,M as v,a as V,x as P,b as T,W as _,L as m,q as d,u as se,c as $,d as Te,e as C,f as rt,o as K,N as U,V as ae,g as ot,K as de,h as Ie,H as ye,i as Ve,j as xe,k as G,m as nt,n as Le,p as lt,r as Oe,s as Me,t as he,v as Ne,w as Ae,y as ut,z as ct,T as Fe,A as dt,B as mt,C as Re,D as De,E as Pe,P as $e,O as Y,$ as ht,F as xt,G as gt}from"./index-B1yGdhtz.js";import{j as e}from"./jsx-runtime-DF5SV9au.js";import{u as pt}from"./embla-carousel-react.esm-KU9cekPH.js";import{Y as bt}from"./index-DCRsf1dF.js";import{T as vt}from"./index-7JkPJWjm.js";var Ee=u.createContext({}),ie=t=>{let{symbol:s,comparisonProps:a,children:i,onSymbolChange:r}=t,[o,n]=u.useState(""),l=u.useCallback(()=>{n("")},[]),c=u.useMemo(()=>({searchValue:o,onSearchValueChange:n,clearSearchValue:l,symbol:s,onSymbolChange:r,comparisonProps:a}),[o,s,r,n,a]);return e.jsx(Ee.Provider,{value:c,children:i})};function F(){return u.useContext(Ee)}var jt=t=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16",children:e.jsx("path",{fill:"#D9D9D9",d:"M0 0h16v16H0z"})}),e.jsx("g",{mask:"url(#a)",children:e.jsx("path",{d:"M3.333 12.667h.95L10.8 6.15l-.95-.95-6.517 6.517zM2.667 14a.65.65 0 0 1-.475-.192.65.65 0 0 1-.192-.475v-1.616a1.32 1.32 0 0 1 .383-.934l8.417-8.4q.2-.183.442-.283.24-.1.508-.1.267 0 .517.1.249.1.433.3l.917.933q.2.184.291.434a1.44 1.44 0 0 1 0 1.008 1.25 1.25 0 0 1-.291.442l-8.4 8.4a1.32 1.32 0 0 1-.933.383zm7.65-8.317L9.85 5.2l.95.95z"})})]}),ft=t=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M7.205 1.334c-.345 0-.674.136-.918.38L6.001 2H2.667a.667.667 0 1 0 0 1.334h10.667a.667.667 0 1 0 0-1.334h-3.333l-.287-.286a1.3 1.3 0 0 0-.918-.38zM2.911 4.667l1.018 8.842c.088.66.656 1.158 1.322 1.158h5.498c.666 0 1.235-.497 1.323-1.163l1.019-8.837z"})}),Xe=t=>e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"12",height:"12",children:e.jsx("path",{fill:"#D9D9D9",d:"M0 0h12v12H0z"})}),e.jsx("g",{mask:"url(#a)",children:e.jsx("path",{d:"M8.5 10a.48.48 0 0 1-.356-.144A.48.48 0 0 1 8 9.5V7q0-.213.144-.356A.48.48 0 0 1 8.5 6.5h1q.212 0 .356.144A.48.48 0 0 1 10 7v2.5q0 .212-.144.356A.48.48 0 0 1 9.5 10zm-3 0a.48.48 0 0 1-.356-.144A.48.48 0 0 1 5 9.5v-7q0-.212.144-.356A.48.48 0 0 1 5.5 2h1q.213 0 .356.144A.48.48 0 0 1 7 2.5v7q0 .212-.144.356A.48.48 0 0 1 6.5 10zm-3 0a.48.48 0 0 1-.356-.144A.48.48 0 0 1 2 9.5V5q0-.213.144-.356A.48.48 0 0 1 2.5 4.5h1q.212 0 .356.144A.48.48 0 0 1 4 5v4.5q0 .212-.144.356A.48.48 0 0 1 3.5 10z"})})]}),We=t=>e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M5.993.958a.416.416 0 0 0-.41.422v.416a.416.416 0 1 0 .832 0V1.38a.416.416 0 0 0-.422-.422M2.749 2.29a.416.416 0 0 0-.29.714l.291.292a.416.416 0 1 0 .589-.588l-.292-.292a.42.42 0 0 0-.298-.126m6.489 0a.42.42 0 0 0-.286.126l-.292.292a.416.416 0 1 0 .588.588l.292-.292a.416.416 0 0 0-.302-.714m-3.239.753a2.895 2.895 0 0 0-2.913 2.914A2.86 2.86 0 0 0 4.751 8.58v1.123c0 .458.374.833.832.833h.832a.835.835 0 0 0 .833-.833V8.58a2.86 2.86 0 0 0 1.665-2.622 2.895 2.895 0 0 0-2.914-2.914M1.421 5.541a.416.416 0 1 0 0 .833h.417a.416.416 0 1 0 0-.833zm8.74 0a.416.416 0 1 0 0 .833h.416a.417.417 0 1 0 0-.833zM3.037 8.492a.42.42 0 0 0-.287.126l-.291.292a.416.416 0 1 0 .588.588l.292-.292a.416.416 0 0 0-.302-.714m5.913 0a.416.416 0 0 0-.29.714l.292.292a.416.416 0 1 0 .588-.588l-.292-.292a.42.42 0 0 0-.298-.126"})}),te=t=>e.jsxs("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"20",height:"21",children:e.jsx("path",{fill:"#D9D9D9",d:"M0 .5h20v20H0z"})}),e.jsx("g",{mask:"url(#a)",children:e.jsx("path",{d:"m10 14.074-3.2 1.913a.6.6 0 0 1-.332.068.6.6 0 0 1-.277-.101.5.5 0 0 1-.186-.256.5.5 0 0 1-.005-.336l.84-3.556-2.82-2.394a.5.5 0 0 1-.174-.281.6.6 0 0 1 .013-.315.5.5 0 0 1 .173-.252.55.55 0 0 1 .305-.112l3.693-.33 1.467-3.393a.57.57 0 0 1 .211-.255A.54.54 0 0 1 10 4.39q.16 0 .292.083.131.082.211.255l1.467 3.414 3.693.309q.178.014.305.123.126.11.173.262t.002.304a.56.56 0 0 1-.183.27l-2.8 2.395.84 3.556a.5.5 0 0 1-.005.336.5.5 0 0 1-.186.256.6.6 0 0 1-.277.101.6.6 0 0 1-.332-.068z"})})]}),we=t=>e.jsxs("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"20",height:"21",children:e.jsx("path",{fill:"#D9D9D9",d:"M0 .5h20v20H0z"})}),e.jsx("g",{mask:"url(#a)",children:e.jsx("path",{d:"M7.333 14.396 10 12.813l2.688 1.583-.709-3 2.313-1.98-3.063-.27L10 6.292 8.77 9.146l-3.062.27 2.334 1.98zM10 14.074l-3.2 1.913a.6.6 0 0 1-.332.068.6.6 0 0 1-.277-.101.5.5 0 0 1-.186-.256.5.5 0 0 1-.005-.336l.84-3.556-2.82-2.394a.5.5 0 0 1-.174-.281.6.6 0 0 1 .013-.315.5.5 0 0 1 .173-.252.55.55 0 0 1 .305-.112l3.693-.33 1.467-3.393a.57.57 0 0 1 .211-.255A.54.54 0 0 1 10 4.39q.16 0 .292.083.131.082.211.255l1.467 3.414 3.693.309q.178.014.305.123.126.11.173.262t.002.304a.56.56 0 0 1-.183.27l-2.8 2.395.84 3.556a.5.5 0 0 1-.005.336.5.5 0 0 1-.186.256.6.6 0 0 1-.277.101.6.6 0 0 1-.332-.068z"})})]}),wt=t=>e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M5.841 1.14a4.667 4.667 0 0 0 0 9.333 4.74 4.74 0 0 0 2.875-.975l2.54 2.56a.6.6 0 0 0 .838 0 .6.6 0 0 0 0-.838L9.537 8.677a4.72 4.72 0 0 0 .971-2.871 4.667 4.667 0 0 0-4.667-4.667m0 1.166a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7"})}),yt=t=>e.jsx("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M10 5.5a.76.76 0 0 0-.583.25l-4.334 4c0 .083-.083.25-.083.333 0 .25.167.417.417.417h2.916v6.667c0 .416.334.833.834.833h1.666c.5 0 .834-.417.834-.833V10.5h2.916c.25 0 .417-.167.417-.417 0-.083-.083-.25-.083-.333l-4.25-4.084c-.25-.083-.417-.166-.667-.166M2.177 3.06A.8.8 0 0 1 2.5 3h15a.834.834 0 1 1 0 1.667h-15a.833.833 0 0 1-.323-1.607"})}),E=t=>e.jsx("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.015.34h-.029a5.98 5.98 0 0 0-3.93 1.477c-.074.065-.027.184.072.184h7.745c.099 0 .146-.119.072-.184A5.98 5.98 0 0 0 6.015.341M3.48 7.866a.23.23 0 0 1 .187.1A2.85 2.85 0 0 0 6 9.178a2.85 2.85 0 0 0 2.334-1.213.23.23 0 0 1 .186-.1h3.104c.09 0 .155.086.13.172A6 6 0 0 1 6 12.327a6 6 0 0 1-5.755-4.29.134.134 0 0 1 .13-.172zM8.26 4.6a.29.29 0 0 0 .229.116h3.11c.09 0 .156-.086.13-.173a6 6 0 0 0-1.106-2.03.22.22 0 0 0-.165-.077H1.543a.22.22 0 0 0-.165.077 6 6 0 0 0-1.105 2.03.134.134 0 0 0 .13.173h3.11A.29.29 0 0 0 3.74 4.6 2.85 2.85 0 0 1 6 3.488c.92 0 1.738.436 2.26 1.112m.414 2.717c-.02.055.02.115.079.115h3.033a.135.135 0 0 0 .133-.112 6 6 0 0 0-.015-2.058.135.135 0 0 0-.133-.11H8.72c-.06 0-.1.061-.078.117a2.83 2.83 0 0 1 .032 2.048m-5.427.115c.06 0 .1-.06.079-.115a2.84 2.84 0 0 1 .032-2.048.085.085 0 0 0-.078-.118H.23a.135.135 0 0 0-.134.11A6 6 0 0 0 .08 7.32c.01.065.067.112.133.112z"})}),ge=t=>e.jsx("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M6.012 1.72c-.286 0-.577.178-.75.532L4.2 4.438l-2.42.344c-.78.108-1.03.872-.47 1.42l1.75 1.703-.407 2.39c-.133.773.508 1.24 1.203.874.268-.142 1.648-.857 2.155-1.124l2.155 1.124c.695.367 1.339-.1 1.202-.874l-.421-2.39 1.749-1.702c.565-.547.326-1.31-.453-1.421l-2.436-.344L6.76 2.252c-.172-.354-.464-.531-.75-.531"})}),pe=t=>e.jsx("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M6.012 1.72c-.286 0-.577.178-.75.532L4.2 4.438l-2.42.344c-.78.108-1.03.872-.47 1.42l1.75 1.703-.407 2.39c-.133.773.508 1.24 1.203.874.268-.142 1.648-.857 2.155-1.124l2.155 1.124c.695.367 1.339-.1 1.202-.874l-.421-2.39 1.749-1.702c.565-.547.326-1.31-.453-1.421l-2.436-.344L6.76 2.252c-.172-.354-.464-.531-.75-.531m0 1.297 1.03 2.108c.073.15.211.242.375.266l2.343.343-1.702 1.64a.48.48 0 0 0-.14.437l.405 2.312L6.246 9.03a.5.5 0 0 0-.468 0L3.7 10.123l.39-2.296a.52.52 0 0 0-.14-.453l-1.687-1.64 2.327-.328a.52.52 0 0 0 .39-.28z"})}),Se=t=>e.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M2.01 2.915a.667.667 0 1 0 0 1.334h12a.667.667 0 0 0 0-1.334zM7.343 13.59a.667.667 0 0 0 1.333 0V7.88l2 1.98.937-.938L8.49 5.777a.686.686 0 0 0-.959 0L4.405 8.923l.938.937 2-1.979z"})}),ke=t=>e.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M4.67 2.203A2.667 2.667 0 0 0 2.005 4.87v6.667a2.667 2.667 0 0 0 2.667 2.666h6.666a2.667 2.667 0 0 0 2.667-2.666V4.87a2.667 2.667 0 0 0-2.667-2.667zm1.334 3.334c.17 0 .349.057.48.187l1.52 1.52 1.52-1.52a.68.68 0 0 1 .48-.187c.17 0 .349.057.48.187.26.26.26.698 0 .959l-1.521 1.52 1.52 1.52c.26.262.26.699 0 .96a.687.687 0 0 1-.958 0L8.004 9.162l-1.52 1.52a.687.687 0 0 1-.96 0 .687.687 0 0 1 0-.958l1.521-1.52-1.52-1.521a.687.687 0 0 1 0-.96.68.68 0 0 1 .479-.186"})}),Nt=t=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16",children:e.jsx("path",{d:"M0 0h16v16H0z"})}),e.jsx("g",{mask:"url(#a)",children:e.jsx("path",{d:"M7.333 8.667h-4V7.333h4v-4h1.333v4h4v1.334h-4v4H7.333z"})})]}),St=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:[e.jsx("path",{d:"M5.99536 1.46487C5.71936 1.46487 5.49536 1.68887 5.49536 1.96487V5.46487H1.99536C1.71936 5.46487 1.49536 5.68887 1.49536 5.96487C1.49536 6.24087 1.71936 6.46487 1.99536 6.46487H5.49536V9.96487C5.49536 10.2409 5.71936 10.4649 5.99536 10.4649C6.27136 10.4649 6.49536 10.2409 6.49536 9.96487V6.46487H9.99536C10.2714 6.46487 10.4954 6.24087 10.4954 5.96487C10.4954 5.68887 10.2714 5.46487 9.99536 5.46487H6.49536V1.96487C6.49536 1.68887 6.27136 1.46487 5.99536 1.46487Z",fill:"url(#paint0_linear_1951_55156)"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"paint0_linear_1951_55156",x1:"10.4954",y1:"5.96487",x2:"1.49536",y2:"5.96487",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"rgb(var(--oui-gradient-brand-end))"}),e.jsx("stop",{offset:"1",stopColor:"rgb(var(--oui-gradient-brand-start))"})]})})]}),kt=t=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M6.326 8.826a.84.84 0 0 0-.6.234L2.16 12.627v-2.135H.492v4.167c0 .46.373.833.834.833h4.166v-1.667H3.357l3.567-3.567a.857.857 0 0 0 0-1.198.84.84 0 0 0-.598-.234M10.502.492V2.16h2.135L9.07 5.726a.857.857 0 0 0 0 1.199.86.86 0 0 0 1.197 0l3.568-3.568v2.135h1.667V1.326a.834.834 0 0 0-.834-.834z"})}),Ct=t=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M14.668.492a.85.85 0 0 0-.599.234l-3.567 3.568V2.159H8.835v4.167c0 .46.373.833.833.833h4.167V5.492H11.7l3.569-3.567a.86.86 0 0 0 0-1.199.85.85 0 0 0-.6-.234m-12.5 8.334v1.666h2.135L.736 14.06a.86.86 0 0 0 0 1.198.86.86 0 0 0 1.198 0l3.568-3.567v2.134h1.666V9.66a.834.834 0 0 0-.833-.833z"})}),Be=t=>e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M3.003 3.998a.494.494 0 0 0-.39.797l3 4c.2.266.597.266.797 0l3-4a.5.5 0 0 0-.407-.797z"})}),_t=t=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M9.186 3.348a.67.67 0 0 0-.436.27l-2.657 4a.69.69 0 0 0 0 .75l2.657 4a.68.68 0 0 0 .934.188.685.685 0 0 0 .187-.937L7.463 7.993 9.87 4.37a.685.685 0 0 0-.187-.938.65.65 0 0 0-.498-.083"})}),zt=t=>{let{emblaRef:s,emblaApi:a,scrollIndex:i,enableScroll:r,news:o,gainers:n,losers:l,total24Amount:c,totalOpenInterest:x,tvl:h,favorite:b}=t,{onSymbolChange:g}=F(),{t:p}=V(),j=v("oui-min-w-0 oui-flex-[0_0_calc((100%_-_32px)_/_3)] 3xl:oui-flex-[0_0_calc((100%_-_48px)_/_4)]",r&&"oui-cursor-pointer oui-select-none"),w=f=>{g==null||g(f),b.addToHistory(f)};return e.jsxs("div",{id:"oui-markets-header",className:v("oui-overflow-hidden",t.className),ref:r?s:void 0,children:[e.jsxs(m,{width:"100%",gapX:4,children:[e.jsx(Tt,{total24Amount:c,totalOpenInterest:x,tvl:h,className:j}),e.jsx(ve,{data:o,title:e.jsx(d.gradient,{color:"brand",children:p("markets.newListings")}),className:j,onSymbol:w}),e.jsx(ve,{data:n,title:e.jsx(d,{className:"oui-text-success-light",children:p("markets.topGainers")}),className:j,onSymbol:w}),e.jsx(ve,{data:l,title:e.jsx(d,{className:"oui-text-danger-light",children:p("markets.topLosers")}),className:j,onSymbol:w})]}),e.jsx("div",{className:"oui-mb-3 oui-mt-1  3xl:oui-mb-0 3xl:oui-mt-4",children:e.jsx(Lt,{scrollIndex:i,scrollPrev:a==null?void 0:a.scrollPrev,scrollNext:a==null?void 0:a.scrollNext})})]})},Tt=t=>{let{total24Amount:s,totalOpenInterest:a,tvl:i}=t,{t:r}=V(),o=u.useMemo(()=>[{label:e.jsxs(m,{gapX:1,children:[e.jsx(E,{})," ",r("markets.column.24hVolume")]}),value:s},{label:e.jsxs(m,{gapX:1,children:[e.jsx(E,{})," ",r("markets.openInterest")]}),value:a},{label:e.jsxs(m,{gapX:1,children:[e.jsx(E,{})," ",`${r("common.assets")} (TVL)`]}),value:i}],[s,a,i]);return e.jsx(m,{direction:"column",justify:"between",width:"100%",height:236,className:t.className,children:o==null?void 0:o.map((n,l)=>e.jsx(It,{...n},l))})},It=t=>e.jsxs(_,{intensity:900,r:"lg",px:4,py:3,width:"100%",children:[e.jsx(d,{as:"div",intensity:36,size:"xs",weight:"semibold",children:t.label}),e.jsx(d.numeral,{size:"base",currency:"$",dp:t.dp||0,rm:C.ROUND_DOWN,rule:t.rule,children:t.value})]}),ve=t=>{var s;return e.jsxs(_,{intensity:900,r:"lg",py:4,pb:2,height:236,className:t.className,children:[e.jsx(_,{px:4,children:e.jsx(d.gradient,{color:"brand",size:"sm",weight:"semibold",children:t.title})}),e.jsx(m,{direction:"column",itemAlign:"start",mt:2,children:(s=t.data)==null?void 0:s.map((a,i)=>e.jsx(Vt,{item:a,onSymbol:t.onSymbol},a.symbol))})]})},Vt=t=>{let{item:s}=t;return e.jsxs(m,{width:"100%",gapX:3,py:2,px:4,className:v("oui-cursor-pointer hover:oui-bg-base-8",t.className),onClick:()=>{t.onSymbol(s)},children:[e.jsx(m,{width:"100%",gapX:1,children:e.jsx(d.formatted,{rule:"symbol",formatString:"base",size:"xs",weight:"semibold",showIcon:!0,children:s.symbol})}),e.jsx(m,{width:"100%",justify:"end",children:e.jsx(d.numeral,{currency:"$",size:"xs",weight:"semibold",dp:s.quote_dp,children:s["24h_close"]})}),e.jsx(m,{width:"100%",justify:"end",children:e.jsx(d.numeral,{rule:"percentages",coloring:!0,size:"xs",weight:"semibold",showIdentifier:!0,children:s.change})})]})},Lt=t=>{let{scrollIndex:s,scrollPrev:a,scrollNext:i}=t;return e.jsx(m,{gapX:1,justify:"center",className:"3xl:oui-hidden",children:[0,1].map(r=>e.jsx(_,{py:1,pl:r===0?1:0,pr:r===1?1:0,onClick:()=>{s===0&&r===1?i==null||i():s===1&&r===0&&(a==null||a())},className:"oui-cursor-pointer",children:e.jsx(_,{width:8,height:4,r:"full",className:v("oui-transition-all oui-duration-300",s===r?"oui-w-4 oui-bg-base-contrast-36":"oui-bg-base-contrast-20")},r)},r))})},Ot=(t,s)=>{if(t==null&&s==null)return 0;if(t==null)return 1;if(s==null)return-1;let a=String(t).trim(),i=String(s).trim(),r=Number(a),o=Number(i),n=!isNaN(r)&&isFinite(r)&&/^-?\d*\.?\d+([eE][+-]?\d+)?$/.test(a),l=!isNaN(o)&&isFinite(o)&&/^-?\d*\.?\d+([eE][+-]?\d+)?$/.test(i);if(n&&l)return r-o;let c=/^\d{4}-\d{2}-\d{2}/.test(a)||/^\d{13}$/.test(a),x=/^\d{4}-\d{2}-\d{2}/.test(i)||/^\d{13}$/.test(i);if(c&&x){let h=new Date(t),b=new Date(s);if(!isNaN(h.getTime())&&!isNaN(b.getTime()))return h.getTime()-b.getTime()}return a.localeCompare(i,void 0,{sensitivity:"base",numeric:!1,caseFirst:"upper"})};function me(t,s){let{sortKey:a,sortOrder:i}=s||{},r=[...t||[]];return a&&i&&r.sort((o,n)=>{let l=Ot(o[a],n[a]);return i==="desc"?-l:l}),r}function re(t,s){let[a,i]=u.useState(t),r=u.useCallback(n=>{let l=n?{sortKey:n.sortKey,sortOrder:n.sort}:void 0;i(l),s==null||s(l)},[]),o=u.useCallback(n=>me(n,a),[a]);return{sort:a,onSort:r,getSortedList:o}}function Mt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oe(t,s="",a){if(!s)return t;let i=Mt(s),r=new RegExp(i,"i"),o=s.toLowerCase(),n=[],l=[],c=[];t==null||t.forEach(h=>{let b=je(h.symbol,a),g=b.toLowerCase();r.test(b)&&(g===o?n.push(h):g.startsWith(o)?l.push(h):c.push(h))});let x=(h,b)=>{let g=je(h.symbol,a),p=je(b.symbol,a);return g<p?-1:g>p?1:0};return l.sort(x),c.sort(x),[...n,...l,...c]}function je(t,s="base"){if(!t)return"";let a=t.split("_"),i=a[0],r=a[1],o=a[2];return s.replace("type",i).replace("base",r).replace("quote",o)}function At(){let[t,s]=u.useState(0),[a,i]=u.useState(0);return u.useEffect(()=>{s(window.innerWidth),i(window.innerHeight);let r=()=>{i(window.innerHeight),s(window.innerWidth)};return window==null||window.addEventListener("resize",r),()=>{window==null||window.removeEventListener("resize",r)}},[]),{width:t,height:a}}var Ft=()=>{let[t,s]=u.useState(0),a=Rt(),{width:i}=At(),[r,o]=pt({loop:!0,slidesToScroll:"auto"});return u.useEffect(()=>{o==null||o.on("select",()=>{s(o==null?void 0:o.selectedScrollSnap())})},[o]),{scrollIndex:t,setScrollIndex:s,emblaRef:r,emblaApi:o,enableScroll:i<1440,...a}};function Rt(){let[t,s]=se($.ALL),{data:a}=Te("/v1/public/balance/stats"),i=u.useMemo(()=>me(t,{sortKey:"created_time",sortOrder:"desc"}).slice(0,5),[t]),r=u.useMemo(()=>me(t,{sortKey:"change",sortOrder:"desc"}).slice(0,5),[t]),o=u.useMemo(()=>me(t,{sortKey:"change",sortOrder:"asc"}).slice(0,5),[t]),n=u.useMemo(()=>(t==null?void 0:t.reduce((x,h)=>x.add(h["24h_amount"]||0),new C(0)))||new C(0),[t]),l=u.useMemo(()=>(t==null?void 0:t.reduce((x,h)=>x.add(h.openInterest||0),new C(0)))||new C(0),[t]),c=u.useMemo(()=>{if(!a)return 0;let{total_holding:x=0}=a;return new C(x).toNumber()},[a]);return{markets:t,news:i,gainers:r,losers:o,total24Amount:n.toNumber(),totalOpenInterest:l.toNumber(),tvl:c,favorite:s}}var Dt=t=>{let{news:s,gainers:a,losers:i,total24Amount:r,totalOpenInterest:o,tvl:n,favorite:l}=t,[c,x]=u.useState("newListings"),{onSymbolChange:h}=F(),{t:b}=V(),g=p=>{h==null||h(p),l.addToHistory(p)};return e.jsxs("div",{id:"oui-markets-header",className:v("oui-overflow-hidden",t.className),children:[e.jsx(Pt,{total24Amount:r,totalOpenInterest:o,tvl:n}),e.jsx(_,{intensity:900,r:"xl",p:3,mt:3,children:e.jsxs(P,{size:"md",value:c,onValueChange:x,children:[e.jsx(T,{title:b("markets.newListings"),value:"newListings",testid:"oui-testid-markets-tab",children:e.jsx(fe,{data:s,onSymbol:g})}),e.jsx(T,{title:b("markets.topGainers"),value:"topGainers",testid:"oui-testid-funding-tab",children:e.jsx(fe,{data:a,onSymbol:g})}),e.jsx(T,{title:b("markets.topLosers"),value:"topLosers",testid:"oui-testid-funding-tab",children:e.jsx(fe,{data:i,onSymbol:g})})]})})]})},Pt=t=>{let{total24Amount:s,totalOpenInterest:a,tvl:i}=t,{t:r}=V(),o=u.useMemo(()=>[{label:e.jsxs(m,{gapX:1,children:[e.jsx(E,{})," ",r("markets.column.24hVolume")]}),value:s},{label:e.jsxs(m,{gapX:1,children:[e.jsx(E,{})," ",r("markets.openInterest")]}),value:a},{label:e.jsxs(m,{gapX:1,children:[e.jsx(E,{})," ",`${r("common.assets")} (TVL)`]}),value:i}],[s,a,i]);return e.jsx(m,{intensity:900,r:"xl",width:"100%",py:3,className:t.className,children:o==null?void 0:o.map((n,l)=>e.jsx(e.Fragment,{children:e.jsx($t,{...n,className:v(l!==o.length-1&&"oui-border-r oui-border-line-6")},l)}))})},$t=t=>e.jsxs(_,{px:3,width:"100%",className:t.className,children:[e.jsx(d,{as:"div",intensity:36,size:"2xs",weight:"semibold",children:t.label}),e.jsx(d.numeral,{size:"base",currency:"$",dp:t.dp||2,rm:C.ROUND_DOWN,rule:t.rule||"human",children:t.value})]}),fe=t=>{var s;return e.jsx(m,{direction:"column",itemAlign:"start",mt:3,children:(s=t.data)==null?void 0:s.map((a,i)=>e.jsx(Et,{item:a,onSymbol:t.onSymbol,className:"oui-px-0"},a.symbol))})},Et=t=>{let{item:s}=t;return e.jsxs(m,{width:"100%",gapX:3,py:2,px:4,className:v("oui-cursor-pointer hover:oui-bg-base-8",t.className),onClick:()=>{t.onSymbol(s)},children:[e.jsx(m,{width:"100%",gapX:1,children:e.jsx(d.formatted,{rule:"symbol",formatString:"base",size:"xs",weight:"semibold",showIcon:!0,children:s.symbol})}),e.jsx(m,{width:"100%",justify:"end",children:e.jsx(d.numeral,{currency:"$",size:"xs",weight:"semibold",dp:s.quote_dp,children:s["24h_close"]})}),e.jsx(m,{width:"100%",justify:"end",children:e.jsx(d.numeral,{rule:"percentages",coloring:!0,size:"xs",weight:"semibold",showIdentifier:!0,children:s.change})})]})},Ke=t=>{let s=Ft(),{isMobile:a}=X();return a?e.jsx(Dt,{className:t.className,...s}):e.jsx(zt,{className:t.className,...s})},Xt=t=>{var r;let{symbol:s,onSymbolChange:a}=F(),{t:i}=V();return e.jsx("div",{className:"oui-custom-scrollbar oui-h-full oui-overflow-y-auto",children:e.jsx(m,{direction:"column",px:2,gapY:1,children:(r=t.dataSource)==null?void 0:r.map(o=>{let n=e.jsxs(m,{intensity:800,p:2,className:"oui-gap-x-7",r:"base",children:[e.jsxs(m,{direction:"column",itemAlign:"start",gapY:1,children:[e.jsxs(m,{gapX:1,children:[e.jsx(U,{symbol:o.symbol,className:"oui-size-[18px]"}),e.jsx(d.formatted,{rule:"symbol",formatString:"base",size:"2xs",weight:"semibold",children:o.symbol})]}),e.jsx(d,{size:"2xs",intensity:36,children:i("markets.column.last")}),e.jsx(d,{size:"2xs",intensity:36,children:i("markets.column.24hPercentage")})]}),e.jsxs(m,{direction:"column",itemAlign:"end",gapY:1,children:[e.jsxs(ae,{size:"xs",color:"primary",children:[o.leverage,"x"]}),e.jsx(d.numeral,{dp:o.quote_dp||2,currency:"$",size:"2xs",intensity:80,children:o["24h_close"]}),e.jsx(d.numeral,{rule:"percentages",coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,size:"2xs",children:o.change})]})]});return e.jsx(Y,{side:"right",sideOffset:6,content:n,delayDuration:0,children:e.jsxs(m,{direction:"column",justify:"center",itemAlign:"center",gapY:1,width:54,height:54,r:"lg",className:v("oui-cursor-pointer","hover:oui-bg-base-7",s===o.symbol&&"oui-bg-base-6 hover:oui-bg-base-6"),onClick:()=>{a==null||a(o)},children:[e.jsx(U,{symbol:o.symbol,className:"oui-size-[18px]"}),e.jsx(d.numeral,{rule:"percentages",coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,size:"2xs",children:o.change})]})},o.symbol)})})})},Wt=t=>{var k;let{symbol:s,favoriteTabs:a,open:i,onOpenChange:r,inputVisible:o,selectedTabs:n,value:l,onValueChange:c,hide:x,hideInput:h,showInput:b,onCheck:g,addTab:p,confirm:j}=t,{t:w}=V(),f=(l==null?void 0:l.length)>15,S=()=>{if(o)return e.jsxs(_,{children:[e.jsxs(m,{gapX:2,children:[e.jsx(ye,{autoFocus:!0,value:l,onValueChange:c,classNames:{root:v("oui-ml-px oui-h-7 oui-w-full oui-rounded-sm oui-bg-base-6",f&&"focus-within:oui-outline-danger focus-visible:oui-outline-danger")},autoComplete:"off",suffix:l&&e.jsx(_,{mr:2,children:e.jsx(Ve,{opacity:1,size:14,className:"oui-cursor-pointer oui-text-base-contrast-20",onClick:()=>{c("")}})})}),e.jsx(de,{className:"oui-rounded-sm",size:"sm",onClick:p,disabled:!l||f,children:w("common.add")})]}),f&&e.jsxs(m,{itemAlign:"center",gapX:1,mt:1,children:[e.jsx("div",{className:"oui-size-1 oui-rounded-full oui-bg-danger"}),e.jsx(d,{color:"danger",children:w("markets.favorites.tabs.maxName")})]})]});let y=a.length>=10;return e.jsx(Y,{open:y?void 0:!1,content:e.jsx(d,{size:"2xs",intensity:80,children:w("markets.favorites.tabs.maxList")}),className:"oui-bg-base-6",delayDuration:0,arrow:{className:"oui-fill-base-6"},children:e.jsx("div",{children:e.jsxs(m,{className:v(y?"oui-cursor-not-allowed":"oui-cursor-pointer"),itemAlign:"center",gapX:2,p:2,intensity:y?500:600,onClick:y?void 0:b,height:28,r:"base",children:[e.jsx(Ie,{size:14,className:"oui-text-base-contrast-36",opacity:1}),e.jsx(d,{className:"",intensity:20,children:w("markets.favorites.dropdown.addPlaceholder")})]})})})},N=e.jsxs(m,{justify:"between",className:"oui-mb-[10px] oui-mt-3",children:[e.jsxs(m,{gapX:1,children:[w("markets.favorites.dropdown.title"),e.jsx(d.formatted,{rule:"symbol",formatString:"base-type",size:"base",showIcon:!0,children:s})]}),e.jsx(Fe,{size:16,className:"oui-cursor-pointer oui-text-base-contrast",onClick:x})]}),z=e.jsxs(_,{children:[e.jsx(_,{my:2,className:"oui-custom-scrollbar oui-max-h-[288px] oui-overflow-y-auto",children:(k=a==null?void 0:a.slice(0,10))==null?void 0:k.map(y=>{let O=!!n.find(W=>W.id===y.id);return e.jsx(_,{className:"oui-cursor-pointer",children:e.jsxs(m,{className:"oui-gap-x-[6px] hover:oui-bg-base-6",p:2,r:"md",onClick:()=>{g(y,O)},children:[O?e.jsx(dt,{size:18,className:"oui-text-base-contrast-80"}):e.jsx(mt,{size:18,className:"oui-text-base-contrast-80"}),e.jsx(d,{intensity:54,children:y.name})]})},y.id)})}),e.jsx(_,{mt:3,pb:5,children:S()})]}),L=e.jsxs(m,{gapX:3,mt:3,children:[e.jsx(de,{color:"gray",onClick:x,fullWidth:!0,className:"oui-text-sm",size:"md",children:w("common.cancel")},"secondary"),e.jsx(de,{onClick:j,fullWidth:!0,className:"oui-text-sm",size:"md",children:w("common.confirm")},"primary")]});return e.jsxs(Re,{open:i,onOpenChange:r,children:[e.jsx(De,{asChild:!0,children:t.children}),e.jsx(Pe,{children:e.jsx($e,{onCloseAutoFocus:y=>y.preventDefault(),onClick:y=>y.stopPropagation(),align:"start",alignOffset:-12,sideOffset:24,className:"oui-markets-favorite-dropdown-menu-content oui-bg-base-8",children:e.jsx(_,{px:5,pb:5,width:360,children:e.jsxs(d,{as:"div",size:"sm",weight:"semibold",children:[N,e.jsx(he,{}),z,L]})})})})]})};function Bt(t){let{symbol:s}=t.row||{},{favorites:a,favoriteTabs:i,updateFavoriteTabs:r,updateSymbolFavoriteState:o}=t.favorite,[n,l]=u.useState(!1),[c,x]=u.useState(!1),[h,b]=u.useState(""),[g,p]=u.useState([]),j=()=>{l(!1)},w=()=>{x(!0)},f=()=>{x(!1)},S=()=>{b(""),f(),p([])},N=()=>{let k={name:h||`WatchList_${i.length}`,id:Date.now()};r(k,{add:!0}),S()},z=(k,y)=>{p(y?g==null?void 0:g.filter(O=>O.id!==k.id):[...g,k]),f()},L=()=>{o(t.row,g,!1),l(!1)};return u.useEffect(()=>{var y;if(!n)return;let k=a==null?void 0:a.find(O=>O.name===s);(y=k==null?void 0:k.tabs)!=null&&y.length&&p(k==null?void 0:k.tabs)},[n,a,i,s]),u.useEffect(()=>{n||S()},[n]),{symbol:s,favoriteTabs:i,open:n,onOpenChange:l,inputVisible:c,selectedTabs:g,value:h,onValueChange:b,hide:j,hideInput:f,showInput:w,onCheck:z,addTab:N,confirm:L}}var ne=t=>{let s=Bt(t);return e.jsx(Wt,{...s,children:t.children})},Kt=(t,s=!1)=>{let{t:a}=V();return[{title:`${a("markets.column.market")} / ${a("common.volume")}`,dataIndex:"24h_amount",multiSort:{fields:[{sortKey:"symbol",label:a("markets.column.market")},{sortKey:"24h_amount",label:a("common.volume")}]},className:"oui-h-[36px]",render:(i,r)=>{let o;return s||(o=e.jsx(ne,{row:r,favorite:t,children:e.jsx(m,{width:12,height:12,justify:"center",itemAlign:"center",className:"oui-mr-1 oui-cursor-pointer",children:r.isFavorite?e.jsx(ge,{className:"oui-size-3 oui-text-[rgba(255,154,46,1)]"}):e.jsx(pe,{className:"oui-size-3 oui-text-base-contrast-36 hover:oui-text-[rgba(255,154,46,1)]"})})})),e.jsxs(m,{children:[o,e.jsxs(m,{direction:"column",itemAlign:"start",gapY:1,children:[e.jsxs(m,{gapX:1,children:[e.jsx(U,{symbol:r.symbol,className:"oui-size-[18px]"}),e.jsx(d.formatted,{rule:"symbol",formatString:"base",size:"2xs",weight:"semibold",children:r.symbol}),e.jsxs(ae,{size:"xs",color:"primary",children:[r.leverage,"x"]})]}),e.jsx(d.numeral,{intensity:54,size:"2xs",rule:"human",dp:2,rm:C.ROUND_DOWN,children:i})]})]})}},{title:a("markets.column.price&Change"),dataIndex:"change",align:"right",onSort:!0,className:"oui-h-[36px]",render:(i,r)=>{let o=c=>{t.updateSymbolFavoriteState(r,t.selectedFavoriteTab,!0),c.stopPropagation()},n="oui-w-4 oui-h-4 oui-text-base-contrast-54 hover:oui-text-base-contrast",l=e.jsx("div",{className:v("oui-absolute oui-right-0 oui-top-[6.5px]","oui-hidden group-hover:oui-block"),children:e.jsxs(m,{className:v("oui-inline-flex","oui-bg-primary-darken oui-py-[6px]"),r:"base",width:52,justify:"center",itemAlign:"end",gapX:2,children:[e.jsx(Se,{className:n,onClick:c=>{c.stopPropagation(),t.pinToTop(r)}}),e.jsx(ke,{className:n,onClick:o})]})});return e.jsxs("div",{className:"oui-relative",children:[s&&l,e.jsxs(m,{direction:"column",justify:"end",itemAlign:"end",gapY:1,className:v(s&&"group-hover:oui-invisible"),children:[e.jsx(d.numeral,{dp:r.quote_dp||2,size:"2xs",children:r["24h_close"]}),e.jsx(d.numeral,{rule:"percentages",coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,size:"2xs",children:i})]})]})}}]},Ut=t=>{var w,f,S,N;let{loading:s,dataSource:a,favorite:i,onSort:r,initialSort:o,getColumns:n,collapsed:l,isFavoritesList:c,renderHeader:x,emptyView:h}=t,{symbol:b,onSymbolChange:g}=F(),p=Kt(i,c),j=typeof n=="function"?n(i,c):p;return l?e.jsx(Xt,{dataSource:a}):e.jsxs(e.Fragment,{children:[x==null?void 0:x(i),e.jsx(G,{classNames:{root:(w=t.tableClassNames)==null?void 0:w.root,body:(f=t.tableClassNames)==null?void 0:f.body,header:v("oui-h-9",(S=t.tableClassNames)==null?void 0:S.header),scroll:(N=t.tableClassNames)==null?void 0:N.scroll,empty:"oui-items-start oui-mt-6"},columns:j,loading:s,dataSource:a,onRow:(z,L)=>({className:v("oui-h-[53px]",t.rowClassName),onClick:()=>{g==null||g(z),i.addToHistory(z)}}),generatedRowKey:z=>z.symbol,rowSelection:{[b]:!0},onSort:r,initialSort:o?{sortKey:o.sortKey,sort:o.sortOrder}:void 0,manualSorting:!0,emptyView:h})]})},Ht=(t=>(t.Markets="markets",t.Funding="funding",t))(Ht||{}),qt=(t=>(t.Favorites="favorites",t.Recent="recent",t.All="all",t.NewListing="newListing",t))(qt||{}),Yt=(t=>(t.Overview="overview",t.Comparison="comparison",t))(Yt||{}),Gt={all:$.ALL,favorites:$.FAVORITES,recent:$.RECENT,newListing:$.NEW_LISTING},Qt=t=>{let[s,a]=u.useState(!0),[i,r]=se(Gt[t.type]||$.ALL),{favorites:o,selectedFavoriteTab:n}=r,{searchValue:l}=F(),{onSort:c,getSortedList:x}=re(t.initialSort,t.onSort),h=u.useMemo(()=>{let g=typeof t.dataFilter=="function"?t.dataFilter(i,{favorites:o,selectedFavoriteTab:n}):i,p=oe(g,l,"base");return x(p)},[i,x,l,t.dataFilter,o,n]);u.useEffect(()=>{a(!1)},[i]);let b=t.type==="favorites";return{loading:s,dataSource:h,favorite:r,onSort:c,isFavoritesList:b}},le=t=>{let s=Qt(t);return e.jsx(Ut,{...s,initialSort:t.initialSort,getColumns:t.getColumns,collapsed:t.collapsed,tableClassNames:t.tableClassNames,rowClassName:t.rowClassName,renderHeader:t.renderHeader,emptyView:t.emptyView})},Q=t=>{let{classNames:s,suffix:a}=t,{t:i}=V(),{searchValue:r,onSearchValueChange:o,clearSearchValue:n}=F();return e.jsx(ye,{value:r,onValueChange:o,placeholder:i("markets.search.placeholder"),classNames:{...s,root:v("oui-mt-px oui-border oui-border-line",s==null?void 0:s.root)},size:"sm",prefix:e.jsx(_,{pl:3,pr:1,children:e.jsx(wt,{className:"oui-text-base-contrast-36"})}),suffix:a||r&&e.jsx(_,{mr:2,children:e.jsx(Ve,{size:14,className:"oui-cursor-pointer oui-text-base-contrast-36",onClick:n})}),autoComplete:"off"})};function Ue(t,s=!1){return{title:K.t("common.symbol"),dataIndex:"symbol",width:150,onSort:!0,render:(a,i)=>{let r;return s||(r=e.jsx(ne,{row:i,favorite:t,children:e.jsx(m,{width:12,height:12,justify:"center",itemAlign:"center",className:"oui-mr-1 oui-cursor-pointer",children:i.isFavorite?e.jsx(ge,{className:"oui-size-3 oui-text-[rgba(255,154,46,1)]"}):e.jsx(pe,{className:"oui-size-3 oui-text-base-contrast-36 hover:oui-text-[rgba(255,154,46,1)]"})})})),e.jsxs(m,{gapX:1,children:[r,e.jsx(U,{symbol:a,className:"oui-size-[18px]"}),e.jsx(d.formatted,{rule:"symbol",formatString:"base",size:"2xs",weight:"semibold",children:a}),e.jsxs(ae,{size:"xs",color:"primary",children:[i.leverage,"x"]})]})}}}function He(){return{title:K.t("markets.column.last"),dataIndex:"24h_close",align:"right",onSort:!0,width:100,render:(t,s)=>e.jsx(d.numeral,{dp:s.quote_dp||2,size:"2xs",children:t})}}function qe(){return{title:K.t("markets.column.24hPercentage"),dataIndex:"change",align:"right",onSort:!0,width:80,render:t=>e.jsx(d.numeral,{rule:"percentages",coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,size:"2xs",children:t})}}var Ye=t=>{let{t:s}=V();return e.jsxs(m,{direction:"column",itemAlign:"center",gapY:4,className:v("oui-text-center",t.className),children:[e.jsx(ot,{}),e.jsxs(de,{color:"gray",size:"xs",className:"oui-bg-base-4",onClick:t.onClick,children:[e.jsx(Ie,{className:"oui-mr-1 oui-text-base-contrast",opacity:1,size:12}),e.jsx(d,{intensity:98,children:s("markets.favorites.addFavorites")})]})]})},Zt=t=>{var R;let{open:s,setOpen:a,container:i,inputRef:r,inputWidth:o,spanRef:n,editing:l,value:c,onValueChange:x,updateCurTab:h,onEdit:b,addTab:g,delTab:p,size:j="default",scrollable:w}=t,{t:f}=V(),{selectedFavoriteTab:S,favoriteTabs:N,updateSelectedFavoriteTab:z}=t.favorite,L=j==="sm"?28:36,k=j==="sm"?18:24,y=(c==null?void 0:c.length)>15,O="oui-bg-gradient-to-r oui-from-[rgb(var(--oui-gradient-brand-start)_/_0.12)] oui-to-[rgb(var(--oui-gradient-brand-end)_/_0.12)]",W=I=>{gt.confirm({title:f("markets.favorites.tabs.delete.dialog.title"),content:e.jsx(d,{size:"sm",children:f("markets.favorites.tabs.delete.dialog.description",{name:I.name})}),onOk(){return p(I),Promise.resolve()}})},Z=I=>{I.key==="Enter"&&h(y)},J=I=>e.jsxs(m,{gapX:2,itemAlign:"center",px:2,py:1,children:[e.jsx(jt,{className:"oui-cursor-pointer oui-text-base-contrast-36 hover:oui-text-base-contrast",onClick:()=>{b(I)}}),e.jsx(ft,{className:"oui-cursor-pointer oui-text-base-contrast-36 hover:oui-text-base-contrast",onClick:()=>{W(I)}})]}),H=()=>{let I=N.length>=10,A=e.jsx(m,{className:v("oui-inline-flex",I?"oui-cursor-not-allowed":"oui-cursor-pointer",I?"oui-bg-base-3":O),width:L,height:k,r:"base",justify:"center",itemAlign:"center",onClick:I?void 0:g,children:I?e.jsx(Nt,{className:"oui-z-[1] oui-size-3 oui-text-base-contrast-54"}):e.jsx(St,{className:"oui-size-3"})});return I?e.jsx(Y,{content:e.jsx(d,{size:"2xs",intensity:80,children:"Maximum 10 groups in the favorite list"}),className:"oui-bg-base-6",delayDuration:0,arrow:{className:"oui-fill-base-6"},children:A}):A},M=I=>e.jsx(Y,{open:y,content:e.jsx(d,{size:"2xs",intensity:80,children:"List name cannot exceed 15 characters"}),className:"oui-bg-base-6",delayDuration:0,sideOffset:0,children:e.jsx(ye,{ref:r,style:y?{width:o}:{"--oui-gradient-angle":"270deg",backgroundClip:"text",WebkitTextFillColor:"transparent",WebkitBackgroundClip:"text",width:o},classNames:{root:v("oui-my-px oui-rounded oui-p-0 oui-px-2","focus-within:oui-outline-transparent focus-visible:oui-outline-none",j==="sm"?"oui-h-[18px]":"oui-h-[24px]",I&&v(y?"oui-bg-danger/15":O)),input:v("oui-font-semibold oui-caret-[rgba(217,217,217,1)]",y?"oui-text-danger":"oui-text-transparent oui-gradient-brand ",j==="sm"?"oui-text-2xs":"oui-text-sm")},value:c,onValueChange:x,onBlur:()=>{h(y)},onKeyUp:Z,autoComplete:"off"})}),D=(I,A)=>{if(l&&A)return M(A);let q={weight:"semibold",size:j==="sm"?"2xs":"sm",className:j==="sm"?"oui-leading-[18px]":"oui-leading-[24px]",as:"div"},be=A?e.jsx(d.gradient,{color:"brand",angle:270,...q,children:I.name}):e.jsx(d,{...q,children:I.name});return e.jsx(_,{r:"base",px:2,height:k,className:v("oui-cursor-pointer oui-select-none",A?"oui-markets-favorites-active-tab-item":"oui-markets-favorites-tab-item",A?O:"oui-bg-line-6 oui-text-base-contrast-36 hover:oui-text-base-contrast"),onClick:()=>{z(I),A&&a(!0)},children:be})};return e.jsxs(m,{width:"100%",gapX:3,className:t.className,children:[e.jsxs(m,{ref:i,id:"oui-markets-favorites-tabs-container",className:v("oui-hide-scrollbar oui-relative oui-cursor-pointer","oui-overflow-hidden oui-overflow-x-auto"),gapX:j==="sm"?2:3,width:"100%",children:[(R=N==null?void 0:N.slice(0,10))==null?void 0:R.map(I=>{let A=S.id===I.id;return e.jsx(Y,{open:A&&!l?s:!1,onOpenChange:q=>{A&&a(q)},content:J(I),delayDuration:0,className:v("oui-bg-base-5"),arrow:{className:"oui-fill-base-5"},children:D(I,A)},I.id)}),!w&&H(),e.jsx(d,{size:"xs",ref:n,className:"oui-invisible",children:c})]}),w&&H()]})};function Jt(t){let{favorite:s,size:a="default"}=t,{favorites:i,favoriteTabs:r,selectedFavoriteTab:o,updateFavoriteTabs:n,updateSelectedFavoriteTab:l,updateFavorites:c}=s,[x,h]=u.useState(!1),[b,g]=u.useState(!1),[p,j]=u.useState(""),[w,f]=u.useState(!1),S=u.useRef(null),N=u.useRef(null),z=u.useRef(null),[L,k]=u.useState(50),y=()=>{setTimeout(()=>{let{scrollWidth:M,clientWidth:D}=S.current||{};M>D&&f(!0)},0)},O=()=>{setTimeout(()=>{S.current&&(S.current.scrollLeft=S.current.scrollWidth-S.current.clientWidth)},0)},W=M=>{g(!0),j(M.name),setTimeout(()=>{var D,R;(D=N.current)==null||D.focus(),(R=N.current)==null||R.setSelectionRange(-1,-1)},0)},Z=M=>{n({...o,name:M?o.name:p},{update:!0}),g(!1),h(!1),y()},J=()=>{let M={name:`WatchList_${r.length}`,id:Date.now()};n(M,{add:!0}),l(M),y(),O()},H=M=>{n(M,{delete:!0}),setTimeout(()=>{let D=i.map(A=>{var q;return{...A,tabs:(q=A.tabs)==null?void 0:q.filter(be=>be.id!==M.id)}});c(D);let R=r.filter(A=>A.id!==M.id),I=(R==null?void 0:R[(R==null?void 0:R.length)-1])||(R==null?void 0:R[0]);l(I)},0)};return u.useEffect(()=>{var M;if(p){let D=(M=z.current)==null?void 0:M.getBoundingClientRect(),R=a==="sm"?0:14;k(Math.max(((D==null?void 0:D.width)||0)+R,50))}},[p]),u.useEffect(()=>{y()},[]),{favorite:s,open:x,setOpen:h,container:S,inputRef:N,inputWidth:L,spanRef:z,editing:b,value:p,onValueChange:j,onEdit:W,updateCurTab:Z,addTab:J,delTab:H,scrollable:w}}var Ge=t=>{let{className:s,...a}=t,i=Jt(a);return e.jsx(Zt,{...i,size:t.size,className:s})};function ue(){let{searchValue:t}=F(),s=u.useCallback(o=>e.jsx(_,{px:3,className:"oui-my-[6px]",children:e.jsx(Ge,{favorite:o,size:"sm"})}),[]),a=u.useCallback((o,n)=>{var x,h;let{favorites:l,selectedFavoriteTab:c}=n;return(h=(x=l==null?void 0:l.filter(b=>{var g;return((g=b.tabs)==null?void 0:g.findIndex(p=>p.id===c.id))!==-1}))==null?void 0:x.map(b=>{let g=o==null?void 0:o.findIndex(p=>p.symbol===b.name);return g!==-1?o[g]:null}))==null?void 0:h.filter(b=>b)},[]),i=u.useCallback(o=>o==="favorites"?{renderHeader:s,dataFilter:a}:{},[s,a]),r=u.useCallback(o=>{if(o.type==="favorites"&&!t)return e.jsx(Ye,{onClick:o.onClick,className:o.className})},[t]);return{renderHeader:s,dataFilter:a,getFavoritesProps:i,renderEmptyView:r}}var es=t=>{let{activeTab:s,onTabChange:a,tabSort:i,onTabSort:r}=t,{t:o}=V(),n=u.useCallback((x,h=!1)=>[Ue(x,h),He(),qe()],[]),{getFavoritesProps:l}=ue(),c=x=>e.jsxs(e.Fragment,{children:[e.jsx(Q,{classNames:{root:v("oui-mx-3 oui-mb-4 oui-mt-5",s!=="favorites"&&"oui-mb-2")}}),e.jsx(le,{type:x,initialSort:i[x],onSort:r(x),getColumns:n,rowClassName:"!oui-h-[34px]",...l(x)})]});return e.jsx(_,{id:"oui-markets-list",intensity:900,py:3,mt:2,r:"2xl",children:e.jsxs(P,{variant:"contained",size:"lg",value:s,onValueChange:a,classNames:{scrollIndicator:"oui-mx-3"},showScrollIndicator:!0,children:[e.jsx(T,{title:o("markets.favorites"),icon:e.jsx(te,{}),value:"favorites",children:c("favorites")}),e.jsx(T,{title:o("markets.allMarkets"),icon:e.jsx(Xe,{}),value:"all",children:c("all")}),e.jsx(T,{title:o("markets.newListings"),icon:e.jsx(We,{}),value:"new",children:c("newListing")})]})})};function ce(t){let[s,a]=rt(t.storageKey,{all:{sortKey:"24h_amount",sortOrder:"desc"}}),i=u.useCallback(r=>o=>{a({...s,[r]:o})},[s]);return{tabSort:s,onTabSort:i}}var ts="orderly_mobile_markets_tab_sort";function ss(){let[t,s]=u.useState("all"),{clearSearchValue:a,searchValue:i}=F(),{tabSort:r,onTabSort:o}=ce({storageKey:ts});return u.useEffect(()=>{a==null||a()},[t]),{activeTab:t,onTabChange:n=>s(n),tabSort:r,onTabSort:o,searchValue:i}}var Qe=(t,s=!1)=>{let{t:a}=V();return u.useMemo(()=>[{title:e.jsx(we,{className:"oui-mt-1"}),dataIndex:"isFavorite",align:"center",width:30,render:(i,r)=>{let o=e.jsx(m,{width:"100%",height:"100%",mr:3,justify:"center",itemAlign:"center",onClick:s?n=>{t.updateSymbolFavoriteState(r,t.selectedFavoriteTab,!0),n.stopPropagation()}:void 0,"data-testid":"oui-testid-markets-table-row-favorite-icon",children:i?e.jsx(te,{className:"oui-text-[rgba(255,154,46,1)]"}):e.jsx(we,{className:"oui-text-base-contrast-36 hover:oui-text-[rgba(255,154,46,1)]"})});return s?o:e.jsx(ne,{row:r,favorite:t,children:o})}},{title:a("markets.column.market"),dataIndex:"symbol",width:90,onSort:!0,render:i=>e.jsx(d.formatted,{rule:"symbol",formatString:"base-type",size:"xs",weight:"semibold",showIcon:!0,children:i})},{title:a("common.price"),dataIndex:"24h_close",width:100,align:"right",onSort:!0,render:(i,r)=>e.jsx(d.numeral,{dp:r.quote_dp||2,currency:"$",children:i})},{title:a("markets.column.24hChange"),dataIndex:"change",width:100,align:"right",onSort:!0,render:i=>e.jsx(d.numeral,{rule:"percentages",coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,children:i})},{title:e.jsxs(m,{gapX:1,children:[e.jsx(E,{})," ",a("markets.column.24hVolume")]}),dataIndex:"24h_amount",width:100,align:"right",onSort:!0,render:i=>e.jsx(d.numeral,{currency:"$",dp:0,rm:C.ROUND_DOWN,children:i})},{title:e.jsxs(m,{gapX:1,children:[e.jsx(E,{})," ",a("markets.openInterest")]}),dataIndex:"openInterest",width:100,align:"right",onSort:!0,render:i=>e.jsx(d.numeral,{currency:"$",dp:0,rm:C.ROUND_DOWN,children:i})},{title:a("markets.dataList.column.8hFunding"),dataIndex:"8h_funding",width:100,align:"right",onSort:!0,render:i=>i===null?"--":e.jsx(d.numeral,{rule:"percentages",coloring:!0,dp:4,rm:C.ROUND_DOWN,showIdentifier:!0,children:i})},{dataIndex:"action",type:"action",width:40,render:(i,r)=>s?e.jsx(m,{justify:"end",mr:4,children:e.jsx(Y,{content:a("markets.dataList.column.moveTop"),align:"center",delayDuration:0,children:e.jsx(_,{className:"oui-hidden oui-cursor-pointer group-hover:oui-block",onClick:o=>{o.stopPropagation(),t.pinToTop(r)},"data-testid":"oui-markets-favorites-pinned-icon",children:e.jsx(yt,{className:"oui-text-base-contrast-20 hover:oui-text-base-contrast"})})})}):null}],[t,s,a])},as=t=>{let{dataSource:s,favorite:a,onSort:i,loading:r,pagination:o}=t,{symbol:n,onSymbolChange:l}=F(),c=Qe(a,!0),x=t.emptyView||e.jsx(m,{className:"oui-text-xs oui-text-base-contrast-36",children:e.jsx(vt,{i18nKey:"markets.dataList.favorites.empty",components:[e.jsx(we,{className:"oui-text-base-contrast-36"},"0")]})});return e.jsxs("div",{children:[e.jsx(Ge,{favorite:a,className:"oui-my-3"}),e.jsx(G,{bordered:!0,columns:c,dataSource:s,emptyView:x,classNames:{empty:"oui-items-start oui-mt-6"},loading:r,onRow:(h,b)=>({className:v("oui-h-[55px] oui-cursor-pointer"),onClick:()=>{l==null||l(h),a.addToHistory(h)}}),generatedRowKey:h=>h.symbol,rowSelection:{[n]:!0},onSort:i,pagination:o,manualSorting:!0})]})},is=()=>{let{setPage:t,pagination:s}=xe({pageSize:10}),[a,i]=se($.FAVORITES),[r,o]=u.useState(!0),{favorites:n,selectedFavoriteTab:l}=i,{searchValue:c}=F(),{onSort:x,getSortedList:h}=re(),b=u.useMemo(()=>{var j,w;let p=(w=(j=n==null?void 0:n.filter(f=>{var S;return((S=f.tabs)==null?void 0:S.findIndex(N=>N.id===l.id))!==-1}))==null?void 0:j.map(f=>{let S=a==null?void 0:a.findIndex(N=>N.symbol===f.name);return S!==-1?a[S]:null}))==null?void 0:w.filter(f=>!!f);return oe(p,c,"base-type")},[a,l,n,c]),g=u.useMemo(()=>h(b),[b,h]);return u.useEffect(()=>{o(!1)},[n]),u.useEffect(()=>{t(1)},[c]),{loading:r,dataSource:g,favorite:i,onSort:x,pagination:s}},rs=t=>{let s=is();return e.jsx(as,{...s,emptyView:t.emptyView})},os=t=>{let{loading:s,dataSource:a,favorite:i,onSort:r,initialSort:o,type:n,pagination:l}=t,{symbol:c,onSymbolChange:x}=F(),h=Qe(i,!1);return e.jsx(G,{bordered:!0,columns:h,loading:s,dataSource:a,onRow:(b,g)=>({className:v("oui-h-[55px] oui-cursor-pointer"),onClick:()=>{x==null||x(b),i.addToHistory(b)},"data-testid":`oui-testid-markets-${n==="new"?"newListing":"all"}-tr-${b.symbol}`}),generatedRowKey:b=>b.symbol,rowSelection:{[c]:!0},onSort:r,initialSort:o,pagination:l,classNames:{header:"oui-h-12"},manualSorting:!0})},ns=t=>{let[s,a]=u.useState(!0),{setPage:i,pagination:r}=xe({pageSize:10}),[o,n]=se($.ALL),{searchValue:l}=F(),{onSort:c,getSortedList:x,sort:h}=re(t.initialSort),b=u.useMemo(()=>{let p=oe(o,l,"base-type");return x(p)},[o,x,l]);u.useEffect(()=>{a(!1)},[o]),u.useEffect(()=>{i(1)},[l]),u.useEffect(()=>{t.type==="all"&&n.updateTabsSortState("all",h==null?void 0:h.sortKey,h==null?void 0:h.sortOrder)},[h,t.type]);let g=u.useMemo(()=>{var j,w,f;let p=t.type==="all"?(j=n.tabSort)==null?void 0:j.all:void 0;return{sortKey:(p==null?void 0:p.sortKey)||((w=t==null?void 0:t.initialSort)==null?void 0:w.sortKey),sort:(p==null?void 0:p.sortOrder)||((f=t==null?void 0:t.initialSort)==null?void 0:f.sortOrder)}},[n.tabSort,t.initialSort,t.type]);return{loading:s,dataSource:b,favorite:n,onSort:c,pagination:r,initialSort:g}},_e=t=>{let s=ns(t);return e.jsx(os,{...s,type:t.type})},ls=t=>{let{activeTab:s,onTabChange:a}=t,{t:i}=V();return e.jsx(_,{id:"oui-markets-list",intensity:900,p:6,r:"2xl",children:e.jsxs(P,{variant:"contained",size:"xl",value:s,onValueChange:a,trailing:e.jsx(Q,{classNames:{root:"oui-my-1 oui-w-[240px]"}}),children:[e.jsx(T,{title:i("markets.favorites"),icon:e.jsx(te,{}),value:"favorites",testid:"oui-testid-markets-favorites-tab",children:e.jsx(rs,{emptyView:!t.searchValue&&e.jsx(Ye,{onClick:()=>{a("all")}})})}),e.jsx(T,{title:i("markets.allMarkets"),icon:e.jsx(Xe,{}),value:"all",testid:"oui-testid-markets-all-tab",children:e.jsx(_e,{type:"all",initialSort:{sortKey:"24h_amount",sortOrder:"desc"}})}),e.jsx(T,{title:i("markets.newListings"),icon:e.jsx(We,{}),value:"new",testid:"oui-testid-markets-newListings-tab",children:e.jsx(_e,{type:"new",initialSort:{sortKey:"created_time",sortOrder:"desc"}})})]})})},Ze=()=>{let{isMobile:t}=X(),s=ss();return t?e.jsx(es,{...s}):e.jsx(ls,{...s})},us=t=>{let{activeTab:s,onTabChange:a,tabSort:i,onTabSort:r}=t,{t:o}=V(),n="oui-h-[calc(100%_-_36px)]",{getFavoritesProps:l,renderEmptyView:c}=ue(),x=h=>e.jsx("div",{className:n,children:e.jsx(le,{type:h,initialSort:i[h],onSort:r(h),tableClassNames:{scroll:v("oui-px-1",h==="favorites"?"oui-pb-9":"oui-pb-2")},...l(h),emptyView:c({type:h,onClick:()=>{a("all")}})})});return e.jsxs(_,{className:v("oui-overflow-hidden oui-font-semibold"),height:"100%",children:[e.jsx(_,{px:3,pb:2,children:e.jsx(Q,{})}),e.jsxs(P,{variant:"contained",size:"md",value:s,onValueChange:a,classNames:{tabsList:v("oui-my-[6px]"),tabsContent:"oui-h-full",scrollIndicator:"oui-mx-3"},className:n,showScrollIndicator:!0,children:[e.jsx(T,{title:o("markets.favorites"),icon:e.jsx(te,{}),value:"favorites",children:x("favorites")}),e.jsx(T,{title:o("markets.recent"),value:"recent",children:x("recent")}),e.jsx(T,{title:o("common.all"),value:"all",children:x("all")}),e.jsx(T,{title:o("markets.newListings"),value:"newListing",children:x("newListing")})]})]})},Ce="orderly_side_markets_tab_sort";function cs(t){let[s,a]=u.useState(t.activeTab),{tabSort:i,onTabSort:r}=ce({storageKey:Ce}),{clearSearchValue:o}=F(),n=u.useCallback(l=>{typeof(t==null?void 0:t.onTabChange)=="function"?t.onTabChange(l):a(l)},[t==null?void 0:t.onTabChange]);return u.useEffect(()=>{a((t==null?void 0:t.activeTab)||"favorites")},[t==null?void 0:t.activeTab]),u.useEffect(()=>{o==null||o()},[s]),{activeTab:s,onTabChange:n,tabSort:i,onTabSort:r}}var ds=t=>{let s=cs({activeTab:t.activeTab,onTabChange:t.onTabChange});return e.jsx(ie,{symbol:t.symbol,onSymbolChange:t.onSymbolChange,children:e.jsx(us,{...s})})},B=(t=5)=>s=>s===0?e.jsx(d,{children:" - "}):e.jsx(d.numeral,{rule:"percentages",dp:t,coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,children:s}),Je=(t,s)=>{let{t:a}=V(),{isMobile:i}=X();return u.useMemo(()=>[{title:a("markets.column.market"),dataIndex:"symbol",onSort:!0,width:135,className:i?"oui-pl-0":void 0,render:r=>e.jsxs(m,{gapX:1,children:[e.jsx(U,{symbol:r,className:i?"oui-size-[18px]":"oui-size-5"}),e.jsx(d.formatted,{rule:"symbol",formatString:"base-type",weight:"semibold",children:r})]})},{title:a("markets.funding.column.estFunding"),dataIndex:"estFunding",width:120,onSort:!0,render:(r,o)=>e.jsxs("div",{children:[e.jsx(d.numeral,{rule:"percentages",dp:5,coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,children:r}),e.jsx("span",{className:"oui-text-base-contrast-54",children:`/ ${o.fundingInterval}h`})]})},{title:a("markets.funding.column.lastFunding"),dataIndex:"lastFunding",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.1dAvg"),dataIndex:"funding1d",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.3dAvg"),dataIndex:"funding3d",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.7dAvg"),dataIndex:"funding7d",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.14dAvg"),dataIndex:"funding14d",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.30dAvg"),dataIndex:"funding30d",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.90dAvg"),dataIndex:"funding90d",width:90,onSort:!0,render:B()},{title:e.jsxs("div",{className:"oui-flex oui-gap-1",children:[e.jsx(ms,{value:t,onValueChange:s}),e.jsx("span",{children:a("markets.funding.column.positiveRate")})]}),dataIndex:t,width:130,align:"right",onSort:!0,render:B(2)}],[a,i,t,s])},ms=t=>{let{t:s}=V(),{isMobile:a}=X(),i=u.useMemo(()=>[{label:s("common.select.1d"),value:"1dPositive"},{label:s("common.select.3d"),value:"3dPositive"},{label:s("common.select.7d"),value:"7dPositive"},{label:s("common.select.14d"),value:"14dPositive"},{label:s("common.select.30d"),value:"30dPositive"},{label:s("common.select.90d"),value:"90dPositive"}],[s]);return a?e.jsx(ht,{size:"sm",value:t.value,onValueChange:t.onValueChange,options:i}):e.jsx(xt.options,{size:"xs",value:t.value,onValueChange:t.onValueChange,options:i})},hs=t=>{let{dataSource:s,isLoading:a,pagination:i,onSort:r}=t,[o,n]=u.useState("1dPositive"),l=Je(o,n);return e.jsx(G,{columns:l,dataSource:s,loading:a,bordered:!0,onRow:()=>({className:v("oui-h-[48px] oui-cursor-pointer")}),classNames:{header:"oui-h-12"},pagination:i,onSort:r,manualSorting:!0,generatedRowKey:c=>c.symbol})},xs=()=>{let{pagination:t}=xe({pageSize:10}),[s]=se($.ALL),{data:a,isLoading:i,getPositiveRates:r}=nt(),o=Le(),{onSort:n,getSortedList:l}=re(),{searchValue:c}=F(),x=u.useMemo(()=>{if(!(s!=null&&s.length))return[];let b=["1d","3d","7d","14d","30d","90d"].reduce((g,p)=>(g[p]=r(a,p),g),{});return s.map(g=>{var S,N,z,L,k,y,O,W,Z,J,H,M;let p=g.symbol,j=a==null?void 0:a.find(D=>D.symbol===p),w=o[p],f=gs(w("next_funding_time"),w("last_funding_rate_timestamp"));return{symbol:p,estFunding:w("est_funding_rate"),lastFunding:w("last_funding_rate"),fundingInterval:f,funding1d:((N=(S=j==null?void 0:j.funding)==null?void 0:S["1d"])==null?void 0:N.rate)??0,funding3d:((L=(z=j==null?void 0:j.funding)==null?void 0:z["3d"])==null?void 0:L.rate)??0,funding7d:((y=(k=j==null?void 0:j.funding)==null?void 0:k["7d"])==null?void 0:y.rate)??0,funding14d:((W=(O=j==null?void 0:j.funding)==null?void 0:O["14d"])==null?void 0:W.rate)??0,funding30d:((J=(Z=j==null?void 0:j.funding)==null?void 0:Z["30d"])==null?void 0:J.rate)??0,funding90d:((M=(H=j==null?void 0:j.funding)==null?void 0:H["90d"])==null?void 0:M.rate)??0,"1dPositive":b["1d"][p]??"-","3dPositive":b["3d"][p]??"-","7dPositive":b["7d"][p]??"-","14dPositive":b["14d"][p]??"-","30dPositive":b["30d"][p]??"-","90dPositive":b["90d"][p]??"-"}})},[s,a,o,r]),h=u.useMemo(()=>oe(x,c,"base-type"),[x,c,t]);return{dataSource:u.useMemo(()=>l(h),[h,l]),isLoading:i,pagination:t,onSort:n}};function gs(t,s){if(!t||!s)return 8;let a=t-s;return Math.round(a/36e5)}var ps=t=>{let{dataSource:s,isLoading:a,onSort:i}=t,[r,o]=u.useState("1dPositive"),n=Je(r,o);return e.jsx(G,{columns:n,dataSource:s,loading:a,onRow:()=>({className:v("oui-h-[34px] oui-cursor-pointer")}),classNames:{header:"oui-h-9",body:"oui-text-2xs"},onSort:i,manualSorting:!0,generatedRowKey:l=>l.symbol})},et=()=>{let t=xs(),{isMobile:s}=X();return s?e.jsx(ps,{...t}):e.jsx(hs,{...t})},tt=()=>{let{comparisonProps:t}=F(),s=(t==null?void 0:t.exchangesName)||"Orderly",a=(t==null?void 0:t.exchangesIconSrc)||"https://oss.orderly.network/static/exchange_logo/orderly.png";return{exchanges:u.useMemo(()=>[s,"Binance",`${s} - Binance`,"OKX",`${s} - OKX`,"Bybit",`${s} - Bybit`,"dYdX",`${s} - dYdX`,"Bitget",`${s} - Bitget`,"KuCoin",`${s} - KuCoin`],[t==null?void 0:t.exchangesName]),brokerName:s,brokerIconSrc:a}},bs="https://oss.orderly.network/static/exchange_logo",st=()=>{let{t}=V(),{isMobile:s}=X(),{exchanges:a,brokerName:i,brokerIconSrc:r}=tt(),o=u.useCallback(n=>n===i?r:`${bs}/${n.toLowerCase().replace(" ","_")}.png`,[i,r]);return u.useMemo(()=>[{title:t("markets.column.market"),dataIndex:"symbol",width:150,onSort:!0,className:s?"oui-pl-0":void 0,render:n=>e.jsxs(m,{gapX:1,children:[e.jsx(U,{symbol:n,className:s?"oui-size-[18px]":"oui-size-5"}),e.jsx(d.formatted,{rule:"symbol",formatString:"base-type",size:"xs",weight:"semibold",children:n})]})},{title:e.jsxs(m,{gapX:1,children:[e.jsx(E,{})," ",t("markets.openInterest")]}),dataIndex:"openInterest",width:120,onSort:!0,render:n=>n==="-"?"-":e.jsx(d.numeral,{currency:"$",dp:0,rm:C.ROUND_DOWN,children:n})},...a.map(n=>{let l=o(n);return{title:e.jsxs(m,{justify:"start",itemAlign:"center",gap:1,children:[!n.includes(" - ")&&l&&e.jsx("img",{src:l,className:v("oui-size-6 oui-rounded-full oui-object-cover",s?"oui-size-[18px]":"oui-size-6")}),n]}),dataIndex:n,onSort:!0,width:n.includes(" - ")?160:130,render(c){return c===null?"-":e.jsx(d.numeral,{rule:"percentages",dp:5,coloring:n.includes(" - ")||n===i,rm:C.ROUND_DOWN,showIdentifier:!0,children:c})}}})],[t,s,a,i,o])},vs=t=>{let s=st();return e.jsx(G,{columns:s,dataSource:t.dataSource,loading:t.isLoading,onRow:()=>({className:v("oui-h-[48px] oui-cursor-pointer")}),classNames:{header:"oui-h-12"},bordered:!0,pagination:t.pagination})};function js(t,s){return new C(t||0).mul(s||0).toNumber()}var fs=()=>{let{pagination:t}=xe({pageSize:10}),{onSort:s,getSortedList:a}=re(),{searchValue:i}=F(),{exchanges:r,brokerName:o}=tt(),n=Le(),{data:l,isLoading:c}=Te("/v1/public/market_info/funding_comparison"),{data:x}=lt(),h=u.useMemo(()=>!Array.isArray(l)||!l.length?[]:l.map(g=>{var w,f,S;let p=x==null?void 0:x.find(N=>N.symbol===g.symbol),j={symbol:g.symbol,openInterest:p?js(p==null?void 0:p.open_interest,p==null?void 0:p.index_price):"-"};for(let N of r)if(N.includes(" - ")){let[,z]=N.replace(/ /g,"").split("-"),L=n[g.symbol],k=L("last_funding_rate")??null,y=((f=(w=g.exchanges)==null?void 0:w.find(O=>O.name.toLowerCase()===z.toLowerCase()))==null?void 0:f.last)??null;k!==null&&y!==null?j[N]=new C(k).sub(y).toString():j[N]=null}else if(N===o){let z=n[g.symbol];j[N]=z("last_funding_rate")??null}else{let z=(S=g.exchanges)==null?void 0:S.find(L=>L.name.toLowerCase()===N.toLowerCase());j[N]=(z==null?void 0:z.last)??null}return j}),[l,x,n,r,o]),b=u.useMemo(()=>oe(h,i,"base-type"),[h,i,t]);return{dataSource:u.useMemo(()=>a(b),[a,b]),isLoading:c,pagination:t,onSort:s}},ws=t=>{let s=st();return e.jsx(G,{columns:s,dataSource:t.dataSource,loading:t.isLoading,onRow:()=>({className:v("oui-h-[34px] oui-cursor-pointer")}),onSort:t.onSort,classNames:{header:"oui-h-9",body:"oui-text-2xs"},manualSorting:!0})},at=()=>{let t=fs(),{isMobile:s}=X();return s?e.jsx(ws,{...t}):e.jsx(vs,{...t})},ys=t=>{let{collapsable:s,collapsed:a,onCollapse:i,activeTab:r,onTabChange:o,className:n,tabSort:l}=t,{symbol:c,onSymbolChange:x}=F(),{getFavoritesProps:h}=ue(),b=()=>a?e.jsx(le,{type:r,initialSort:l[r],collapsed:a,...h(r)}):e.jsx(ds,{activeTab:r,onTabChange:o,symbol:c,onSymbolChange:x});return e.jsxs(m,{id:"oui-side-markets",className:v("oui-font-semibold",n),direction:"column",gapY:5,height:"100%",width:"100%",children:[e.jsx(Ns,{collapsable:s,collapsed:a,onCollapse:i}),e.jsx(_,{width:"100%",className:v(a?"oui-h-[calc(100%_-_52px)]":"oui-h-[calc(100%_-_56px)]"),children:b()})]})},Ns=t=>{let{collapsable:s,collapsed:a,onCollapse:i}=t,{t:r}=V(),o=v("oui-text-base-contrast-36",s?"oui-cursor-pointer hover:oui-text-base-contrast-80":"oui-cursor-not-allowed");return a?e.jsx(kt,{className:o,onClick:()=>{i==null||i(!1)}}):e.jsxs(m,{justify:"between",px:3,width:"100%",children:[e.jsx(d,{size:"base",intensity:80,children:r("common.markets")}),e.jsx(Ct,{className:o,onClick:()=>{i==null||i(!0)}})]})},Ss="orderly_side_markets_sel_tab_key";function ks(t){let[s,a]=u.useState(t==null?void 0:t.collapsed),[i,r]=Ne(Ss,"all"),{tabSort:o}=ce({storageKey:Ce}),n=u.useMemo(()=>(t==null?void 0:t.collapsable)??!0,[t==null?void 0:t.collapsable]),l=u.useCallback(c=>{typeof(t==null?void 0:t.onCollapse)=="function"?t.onCollapse(c):a(c)},[t==null?void 0:t.onCollapse]);return u.useEffect(()=>{a(t==null?void 0:t.collapsed)},[t==null?void 0:t.collapsed]),{collapsable:n,collapsed:s,onCollapse:l,activeTab:i,onTabChange:r,tabSort:o}}var ea=t=>{let s=ks({collapsable:t.collapsable,collapsed:t.collapsed,onCollapse:t.onCollapse});return e.jsx(ie,{symbol:t.symbol,onSymbolChange:t.onSymbolChange,children:e.jsx(ys,{...s,className:t.className})})},Cs=()=>{let{t}=V();return u.useCallback((s,a=!1)=>[Ue(s,a),He(),qe(),{title:t("common.volume"),dataIndex:"24h_amount",align:"right",onSort:!0,className:"oui-relative",width:80,render:(i,r)=>{let o=c=>{s.updateSymbolFavoriteState(r,s.selectedFavoriteTab,!0),c.stopPropagation()},n="oui-w-4 oui-h-4 oui-text-base-contrast-54 hover:oui-text-base-contrast",l=e.jsx("div",{className:v("oui-absolute oui-right-1 oui-top-[3px]"),children:e.jsxs(m,{className:v("oui-bg-primary-darken oui-py-[6px]","oui-hidden group-hover:oui-inline-flex"),r:"base",width:52,justify:"center",itemAlign:"end",gapX:2,children:[e.jsx(Se,{className:n,onClick:c=>{c.stopPropagation(),s.pinToTop(r)}}),e.jsx(ke,{className:n,onClick:o})]})});return e.jsxs(e.Fragment,{children:[a&&l,e.jsx(d.numeral,{rule:"human",dp:2,rm:C.ROUND_DOWN,className:v(a&&"group-hover:oui-invisible"),children:i})]})}}],[t])},_s=t=>e.jsxs(Re,{open:t.open,onOpenChange:t.onOpenChange,children:[e.jsx(De,{asChild:!0,children:t.children}),e.jsx(Pe,{children:e.jsx($e,{onCloseAutoFocus:s=>s.preventDefault(),onClick:s=>s.stopPropagation(),align:"start",alignOffset:-32,sideOffset:20,className:v("oui-markets-dropdown-menu-content oui-bg-base-8 oui-p-0",t.contentClassName),children:e.jsx(zs,{...t,hide:t.hide})})})]}),zs=t=>{let{activeTab:s,onTabChange:a,tabSort:i,onTabSort:r}=t,{t:o}=V(),n=Cs(),l=e.jsxs(m,{mx:3,gapX:3,pt:3,pb:2,children:[e.jsx(Q,{classNames:{root:"oui-w-full"}}),e.jsx(Fe,{size:12,className:"oui-cursor-pointer oui-text-base-contrast-80",onClick:t.hide,opacity:1})]}),c="oui-h-[calc(100%_-_36px)]",{getFavoritesProps:x,renderEmptyView:h}=ue(),b=g=>e.jsx("div",{className:c,children:e.jsx(le,{type:g,initialSort:i[g],onSort:r(g),getColumns:n,tableClassNames:{root:"!oui-bg-base-8",scroll:"oui-pb-5 oui-px-1"},rowClassName:"!oui-h-[34px]",...x(g),emptyView:h({type:g,onClick:()=>{a("all")}})})});return e.jsxs(_,{className:v("oui-overflow-hidden oui-font-semibold"),height:"100%",intensity:800,children:[l,e.jsxs(P,{variant:"contained",size:"md",value:s,onValueChange:a,classNames:{tabsList:"oui-my-[6px] oui-px-3",tabsContent:"oui-h-full"},className:c,children:[e.jsx(T,{title:o("markets.favorites"),icon:e.jsx(te,{}),value:"favorites",children:b("favorites")}),e.jsx(T,{title:o("markets.recent"),value:"recent",children:b("recent")}),e.jsx(T,{title:o("common.all"),value:"all",children:b("all")}),e.jsx(T,{title:o("markets.newListings"),value:"newListing",children:b("newListing")})]})]})},Ts="orderly_dropdown_markets_sel_tab_key",Is="orderly_dropdown_markets_tab_sort";function Vs(){let[t,s]=u.useState(!1),[a,i]=Ne(Ts,"all"),{tabSort:r,onTabSort:o}=ce({storageKey:Is}),{clearSearchValue:n}=F(),l=()=>{s(!1)};return u.useEffect(()=>{n==null||n()},[a]),{activeTab:a,onTabChange:c=>i(c),open:t,onOpenChange:s,hide:l,tabSort:r,onTabSort:o}}var Ls=t=>{let s=Vs();return e.jsx(ie,{symbol:t.symbol,onSymbolChange:t.onSymbolChange,children:e.jsx(_s,{...s,contentClassName:t.contentClassName,children:t.children})})},Os=(t,s=!1)=>[{title:`${K.t("markets.column.market")} / ${K.t("common.volume")}`,dataIndex:"24h_amount",multiSort:{fields:[{sortKey:"symbol",label:K.t("markets.column.market")},{sortKey:"24h_amount",label:K.t("common.volume")}]},className:"oui-h-[36px]",render:(a,i)=>{let r;return s||(r=e.jsx(ne,{row:i,favorite:t,children:e.jsx(m,{width:12,height:12,justify:"center",itemAlign:"center",className:"oui-mr-1 oui-cursor-pointer",children:i.isFavorite?e.jsx(ge,{className:"oui-size-3 oui-text-[rgba(255,154,46,1)]"}):e.jsx(pe,{className:"oui-size-3 oui-text-base-contrast-36 hover:oui-text-[rgba(255,154,46,1)]"})})})),e.jsxs(m,{children:[r,e.jsxs(m,{direction:"column",itemAlign:"start",gapY:1,children:[e.jsxs(m,{gapX:1,children:[e.jsx(U,{symbol:i.symbol,className:"oui-size-[18px]"}),e.jsx(d.formatted,{rule:"symbol",formatString:"base",size:"2xs",weight:"semibold",children:i.symbol}),e.jsxs(ae,{size:"xs",color:"primary",children:[i.leverage,"x"]})]}),e.jsx(d.numeral,{intensity:54,rule:"human",dp:2,rm:C.ROUND_DOWN,children:a})]})]})}},{title:K.t("markets.column.price&Change"),dataIndex:"change",align:"right",onSort:!0,className:"oui-h-[36px]",render:(a,i)=>{let r=l=>{t.updateSymbolFavoriteState(i,t.selectedFavoriteTab,!0),l.stopPropagation()},o="oui-w-4 oui-h-4 oui-text-base-contrast-54 hover:oui-text-base-contrast",n=e.jsx("div",{className:v("oui-absolute oui-right-0 oui-top-[6.5px]","oui-hidden group-hover:oui-block"),children:e.jsxs(m,{className:v("oui-inline-flex","oui-bg-primary-darken oui-py-[6px]"),r:"base",width:52,justify:"center",itemAlign:"end",gapX:2,children:[e.jsx(Se,{className:o,onClick:l=>{l.stopPropagation(),t.pinToTop(i)}}),e.jsx(ke,{className:o,onClick:r})]})});return e.jsxs("div",{className:"oui-relative",children:[s&&n,e.jsxs(m,{direction:"column",justify:"end",itemAlign:"end",gapY:1,className:v(s&&"group-hover:oui-invisible"),children:[e.jsx(d.numeral,{dp:i.quote_dp||2,size:"2xs",children:i["24h_close"]}),e.jsx(d.numeral,{rule:"percentages",coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,size:"2xs",children:a})]})]})}}],Ms=t=>{let{className:s,tabSort:a,onTabSort:i}=t,{t:r}=V(),{getFavoritesProps:o,renderEmptyView:n}=ue(),l=c=>{let x=c==="favorites";return e.jsx(le,{type:c,initialSort:a[c],onSort:i(c),getColumns:Os,tableClassNames:{root:"!oui-bg-base-8",scroll:v("oui-pb-[env(safe-area-inset-bottom,_20px)]",x?"oui-h-[calc(100%_-_70px)]":"oui-h-[calc(100%_-_40px)]")},emptyView:n({type:c,onClick:()=>{t.onTabChange("all")}}),...o(c)})};return e.jsxs(_,{height:"100%",className:v("oui-font-semibold",s),children:[e.jsxs(_,{px:3,mt:3,mb:2,children:[e.jsx(d,{size:"base",intensity:80,children:r("common.markets")}),e.jsx(Q,{classNames:{root:"oui-mt-4"}})]}),e.jsxs(P,{variant:"contained",size:"md",value:t.activeTab,onValueChange:t.onTabChange,classNames:{tabsList:v("oui-my-[6px]"),tabsContent:"oui-h-full",scrollIndicator:"oui-mx-3"},className:"oui-h-[calc(100%_-_92px)]",showScrollIndicator:!0,children:[e.jsx(T,{title:r("markets.favorites"),icon:e.jsx(te,{}),value:"favorites",children:l("favorites")}),e.jsx(T,{title:r("common.all"),value:"all",children:l("all")})]})]})},As="orderly_markets_sheet_sel_tab_key";function Fs(){let{tabSort:t,onTabSort:s}=ce({storageKey:Ce}),[a,i]=Ne(As,"favorites");return{tabSort:t,onTabSort:s,activeTab:a,onTabChange:i}}var ta=t=>{let s=Fs();return e.jsx(ie,{symbol:t.symbol,onSymbolChange:t.onSymbolChange,children:e.jsx(Ms,{...s,className:t.className})})},Rs=t=>{let{symbol:s,data:a,leverage:i,onSymbol:r}=t,o=e.jsxs(m,{className:"oui-cursor-pointer oui-gap-x-[6px]",onClick:r,children:[e.jsx(d.formatted,{className:"oui-break-normal oui-whitespace-nowrap",rule:"symbol",formatString:"base-type",size:"sm",weight:"semibold",showIcon:!0,children:s}),e.jsx(Be,{className:"oui-text-base-contrast-54 oui-w-[14px] oui-h-[14px]"})]});return e.jsxs(m,{className:v("oui-symbol-info-bar-mobile","oui-font-semibold oui-h-full",t.className),children:[e.jsxs(m,{gapX:3,className:"oui-flex-1 oui-overflow-hidden oui-h-full",children:[e.jsxs(m,{gapX:3,children:[o,e.jsxs(ae,{size:"xs",color:"primary",children:[i,"x"]})]}),e.jsx(he,{className:"oui-h-6",direction:"vertical",intensity:8}),e.jsx(d.numeral,{size:"2xs",rule:"percentages",coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,children:a==null?void 0:a.change})]}),t.trailing]})};function Ds(t){let{symbol:s}=t,a=Oe(s),i=Me(),r=u.useMemo(()=>{let o=i[s],n=o("base_imr");return Ps(n)},[s,i]);return{symbol:s,data:a,leverage:r}}function Ps(t){return t?1/t:void 0}var sa=t=>{let{symbol:s,...a}=t,i=Ds({symbol:s});return e.jsx(Rs,{...i,...a})},$s=t=>{let{symbol:s,isFavorite:a,favorite:i,data:r,quotoDp:o,openInterest:n,containerRef:l,leadingElementRef:c,tailingElementRef:x,leadingVisible:h,tailingVisible:b,onScoll:g,fundingPeriod:p,capFunding:j,floorFunding:w}=t,{t:f}=V(),S=e.jsx(ne,{row:{symbol:s},favorite:i,children:e.jsx(m,{width:12,height:12,justify:"center",itemAlign:"center",className:"oui-mr-1 oui-cursor-pointer",children:a?e.jsx(ge,{className:"oui-size-3 oui-text-[rgba(255,154,46,1)]"}):e.jsx(pe,{className:"oui-size-3 oui-text-base-contrast-36 hover:oui-text-[rgba(255,154,46,1)]"})})}),N=e.jsx(Ls,{contentClassName:"oui-w-[429px] oui-h-[496px]",symbol:t.symbol,onSymbolChange:t.onSymbolChange,children:e.jsxs(m,{gapX:1,className:"oui-cursor-pointer",children:[e.jsx(U,{symbol:s,className:"oui-size-4"}),e.jsx(d.formatted,{className:"oui-whitespace-nowrap oui-break-normal",rule:"symbol",formatString:"base-type",size:"xs",weight:"semibold",intensity:98,children:s}),e.jsx(Be,{className:"oui-text-base-contrast-54"})]})}),z=e.jsx(d.numeral,{dp:o||2,currency:"$",size:"sm",intensity:98,className:"oui-data-value",children:r==null?void 0:r["24h_close"]}),L=e.jsxs(e.Fragment,{children:[e.jsx(d.numeral,{coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,children:r==null?void 0:r["24h_change"]}),e.jsx(d,{intensity:36,children:"/"}),e.jsx(d.numeral,{rule:"percentages",coloring:!0,rm:C.ROUND_DOWN,showIdentifier:!0,children:r==null?void 0:r.change})]});return e.jsxs(m,{className:v("oui-symbol-info-bar-desktop","oui-h-[54px] oui-font-semibold",t.className),style:{transform:"translateZ(0)",willChange:"transform"},children:[e.jsxs(m,{gapX:6,className:"oui-h-full oui-flex-1 oui-overflow-hidden",children:[e.jsxs(m,{gapX:1,children:[S,N]}),e.jsx(he,{className:"oui-h-[26px]",direction:"vertical",intensity:8}),z,e.jsxs("div",{className:"oui-relative oui-h-full oui-overflow-hidden",children:[e.jsx("div",{ref:l,className:"oui-hide-scrollbar oui-h-full oui-overflow-x-auto",children:e.jsxs(m,{gapX:8,height:"100%",children:[e.jsx("div",{ref:c,children:e.jsx(ee,{label:f("markets.column.24hChange"),value:L})}),e.jsx(ee,{label:f("markets.symbolInfoBar.Mark"),value:e.jsx(d.numeral,{dp:o,"data-testid":"oui-testid-tokenInfo-markPrice-value",children:r==null?void 0:r.mark_price}),hint:f("markets.symbolInfoBar.Mark.tooltip")}),e.jsx(ee,{label:f("markets.symbolInfoBar.Index"),value:e.jsx(d.numeral,{dp:o,children:r==null?void 0:r.index_price}),hint:f("markets.symbolInfoBar.Index.tooltip")}),e.jsx(ee,{label:f("markets.symbolInfoBar.24hVolume"),value:e.jsx(d.numeral,{rule:"human",dp:2,children:r==null?void 0:r["24h_amount"]}),hint:f("markets.symbolInfoBar.24hVolume.tooltip")}),e.jsx(ee,{label:f("markets.symbolInfoBar.predFundingRate"),value:e.jsx(Es,{symbol:s}),hint:e.jsxs(m,{width:"100%",itemAlign:"center",direction:"column",gap:1,children:[e.jsxs(m,{justify:"between",itemAlign:"center",width:"100%",children:[e.jsx(d,{intensity:54,children:f("trading.fundingRate.predFundingRate.interval")}),e.jsx(d,{intensity:80,children:p})]}),e.jsxs(m,{justify:"between",itemAlign:"center",width:"100%",children:[e.jsxs(d,{intensity:54,children:[f("trading.fundingRate.predFundingRate.cap")," /",f("trading.fundingRate.predFundingRate.floor")]}),e.jsxs(d,{intensity:80,children:[j," / ",w]})]}),e.jsx(he,{className:"oui-w-full",intensity:8}),f("markets.symbolInfoBar.predFundingRate.tooltip")]})}),e.jsx("div",{ref:x,children:e.jsx(ee,{label:f("markets.openInterest"),value:e.jsxs(e.Fragment,{children:[e.jsx(d.numeral,{rule:"human",dp:2,children:n}),e.jsx(d,{intensity:36,children:" USDC"})]}),hint:f("markets.openInterest.tooltip")})})]})}),e.jsx(ze,{leading:!0,onClick:g,visible:h}),e.jsx(ze,{tailing:!0,onClick:g,visible:b})]})]}),t.trailing]})},ee=t=>{let{label:s,value:a,hint:i}=t;return e.jsxs(m,{direction:"column",itemAlign:"start",children:[e.jsx(Y,{open:i?void 0:!1,content:i,className:"oui-max-w-[240px] oui-bg-base-6 ",arrow:{className:"oui-fill-base-6"},delayDuration:300,children:e.jsx(d,{size:"2xs",intensity:36,className:v("oui-data-label","oui-whitespace-nowrap oui-break-normal",i&&"oui-cursor-pointer oui-border-b oui-border-dashed oui-border-line-12"),children:s})}),e.jsx(d,{size:"2xs",intensity:98,className:v("oui-data-value","oui-whitespace-nowrap oui-break-normal oui-leading-[20px]"),children:a})]})},ze=t=>{let{visible:s,leading:a,tailing:i,onClick:r}=t;return s?e.jsx("button",{onClick:()=>{r==null||r(a?"left":"right")},style:{background:"linear-gradient(90deg, #07080A 0%, rgba(7, 8, 10, 0.60) 65%, rgba(7, 8, 10, 0.00) 100%)"},className:v("oui-flex oui-w-[80px] oui-items-center","oui-absolute oui-inset-y-0 oui-rounded-l",a&&"oui-left-0 oui-pl-1",i&&"oui-right-0 oui-rotate-180 oui-pr-1"),children:e.jsx(_t,{className:"oui-text-base-contrast-54 hover:oui-text-base-contrast-80"})}):null},Es=({symbol:t})=>{let s=Ae(t);return(s==null?void 0:s.est_funding_rate)===null?"--":e.jsxs("div",{children:[e.jsx(d.numeral,{unit:"%",dp:4,className:"oui-text-[#FF9A2E]",children:s.est_funding_rate}),e.jsx(d,{intensity:36,className:"oui-tabular-nums",children:` in ${s.countDown}`})]})};function Xs(t){let{symbol:s}=t,a=Oe(s),i=Ae(s),r=ut(),{data:o,isLoading:n}=ct(s),l=u.useMemo(()=>!o||n?"-":`${o.funding_period}h`,[o,n]),c=u.useMemo(()=>!o||n?"-":`${new C(o.cap_funding).mul(100).toNumber()}%`,[o,n]),x=u.useMemo(()=>!o||n?"-":`${new C(o.floor_funding).mul(100).toNumber()}%`,[o,n]),h=Me()[s]("quote_dp"),[b,g]=u.useState(!1),[p,j]=u.useState(!1),w=u.useRef(null),f=u.useRef(null),S=u.useRef(null),N=u.useMemo(()=>!!r.favorites.find(L=>L.name===s),[r.favorites,s]),z=u.useMemo(()=>new C((a==null?void 0:a.open_interest)??0).mul((a==null?void 0:a.index_price)??0).toDecimalPlaces(2).valueOf(),[a]);return u.useEffect(()=>{let L=new IntersectionObserver(k=>{for(let y=0;y<k.length;y++){let O=k[y];O&&(O.target===f.current&&g(!O.isIntersecting),O.target===S.current&&j(!O.isIntersecting))}});return f.current&&L.observe(f.current),S.current&&L.observe(S.current),()=>{L.disconnect()}},[]),{symbol:s,isFavorite:N,favorite:r,data:a,quotoDp:h,openInterest:z,fundingRate:i,containerRef:w,leadingElementRef:f,tailingElementRef:S,leadingVisible:b,tailingVisible:p,onScoll:L=>{var k;(k=w.current)==null||k.scrollBy({left:L==="left"?-100:100,behavior:"smooth"})},fundingPeriod:l,capFunding:c,floorFunding:x}}var aa=t=>{let{symbol:s,...a}=t,i=Xs({symbol:s});return e.jsx($s,{...i,...a})},Ws=t=>{let{t:s}=V(),a=e.jsx(Q,{classNames:{root:v("oui-mb-2 oui-mt-5")}});return e.jsx(_,{intensity:900,p:3,mt:2,mb:5,r:"xl",height:"100%",className:"oui-markets-funding-list",children:e.jsxs(P,{variant:"contained",size:"lg",value:t.activeTab,onValueChange:t.onTabChange,children:[e.jsx(T,{title:s("common.overview"),value:"overview",testid:"oui-testid-funding-overview-tab",children:e.jsxs(e.Fragment,{children:[a,e.jsx(et,{})]})}),e.jsx(T,{title:s("markets.funding.comparison"),value:"comparison",testid:"oui-testid-funding-comparison-tab",children:e.jsxs(e.Fragment,{children:[a,e.jsx(at,{})]})})]})})};function Bs(){let[t,s]=u.useState("overview");return{activeTab:t,onTabChange:s}}var Ks=t=>{let{t:s}=V();return e.jsx(_,{intensity:900,p:6,mt:4,r:"2xl",className:"oui-markets-funding-list",children:e.jsxs(P,{variant:"contained",size:"lg",value:t.activeTab,onValueChange:t.onTabChange,trailing:e.jsx(Q,{classNames:{root:"oui-my-1 oui-w-[240px]"}}),children:[e.jsx(T,{title:s("common.overview"),value:"overview",testid:"oui-testid-funding-overview-tab",children:e.jsx(et,{})}),e.jsx(T,{title:s("markets.funding.comparison"),value:"comparison",testid:"oui-testid-funding-comparison-tab",children:e.jsx(at,{})})]})})},it=()=>{let t=Bs(),{isMobile:s}=X();return s?e.jsx(Ws,{...t}):e.jsx(Ks,{...t})},ia=t=>{let{isMobile:s}=X(),[a,i]=u.useState("markets");return e.jsx(ie,{symbol:t.symbol,onSymbolChange:t.onSymbolChange,navProps:t.navProps,comparisonProps:t.comparisonProps,children:e.jsx("div",{id:"oui-markets-home-page",className:v("oui-font-semibold",t.className),children:s?e.jsx(Hs,{activeTab:a,onTabChange:i,navProps:t.navProps}):e.jsx(Us,{activeTab:a,onTabChange:i})})})},Us=t=>{let{t:s}=V();return e.jsx(_,{p:6,children:e.jsxs(P,{size:"xl",value:t.activeTab,onValueChange:t.onTabChange,children:[e.jsxs(T,{title:s("common.markets"),value:"markets",testid:"oui-testid-markets-tab",children:[e.jsx(Ke,{className:"oui-mt-4"}),e.jsx(Ze,{})]}),e.jsx(T,{title:s("common.funding"),value:"funding",testid:"oui-testid-funding-tab",children:e.jsx(it,{})})]})})},Hs=t=>{var a,i,r,o;let{t:s}=V();return e.jsxs(P,{variant:"text",size:"xl",value:t.activeTab,onValueChange:t.onTabChange,classNames:{tabsListContainer:"oui-border-0",tabsList:"oui-mx-6 oui-my-2",trigger:v("oui-text-2xl oui-font-bold","data-[state=active]:after:oui-bg-transparent!"),tabsContent:"oui-px-3"},leading:((a=t.navProps)==null?void 0:a.leftNav)&&e.jsx(bt,{className:"oui-ml-3 -oui-mr-4",...(i=t==null?void 0:t.navProps)==null?void 0:i.leftNav,logo:(r=t==null?void 0:t.navProps)==null?void 0:r.logo,routerAdapter:(o=t==null?void 0:t.navProps)==null?void 0:o.routerAdapter}),children:[e.jsxs(T,{title:s("common.markets"),value:"markets",testid:"oui-testid-markets-tab",children:[e.jsx(Ke,{className:"oui-mt-2"}),e.jsx(Ze,{})]}),e.jsx(T,{title:s("common.funding"),value:"funding",testid:"oui-testid-funding-tab",children:e.jsx(it,{})})]})};export{aa as $,ia as B,ta as C,ea as Z,sa as _};
